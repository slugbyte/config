#!/bin/bash
# $ image2jpg $image-filepath [outname]
# outfile fill be in same directory as the input filepath
# it will error if the output filepath allready exists
# outfile will allways have the extension .jpg
img="$1"
out="${img}"
out="${2:-$out}"
out="${out%.*}.jpg"
out="$(dirname "$img")/$(basename "$out")"

if [[ -f $out ]];then
  echo "ERROR: output path allready exists $out"
  exit 1
fi

magick "$img" -quality 95 -strip "${out}"

echo "$out"
